#!/usr/bin/env bash

commands="view "
path="${HOME}/programing/python/jackpotAnalyzer"

if test -n "$COMP_LINE"; then
  pre="${COMP_LINE##* }"
  for c in ${commands}; do
    test -z "${pre}" -o "${c}" != "${c#"${pre}"}" && echo "$c"
  done
  exit
fi

case "$@" in
  view)
    cd "${path}" || exit 1
    uv run view.py
    ;;
  *) 
    cd "${path}" || exit 1
    uv run main.py
    [[ -n $(git status --short) ]] || exit 1
    git add data.csv
    git commit -m "new numbers added"
    git push
    ;;
esac
